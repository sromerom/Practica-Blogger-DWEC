<!DOCTYPE html>
<html lang="ca">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <style>
        #destiDrag {
            border: 2px solid black;
            background-color: white;
            width: 400px;
            height: 250px;
        }
        
        #destiDrag div {
            display: inline-block;
            width: 300px;
            height: 150px;
            border: 2px solid black;
            margin: 50px;
        }
        
        #opcionsDrag div {
            display: inline-block;
            width: 300px;
            height: 150px;
            border: 2px solid black;
        }
        
        #pocCap {
            background-color: #242424;
            color: white;
        }
        
        #lleuger {
            background-color: red;
        }
        
        #moderat {
            background-color: orange;
        }
        
        #fort {
            background-color: yellow;
        }
        
        #professional {
            background-color: green;
        }
    </style>


    <title>Calculadora Calories</title>
</head>

<body>
    <section>
        <label for="sexes">Sexe:</label>
        <input id="rad1" type="radio" name="sexe" value="home"> Home
        <input id="rad2" type="radio" name="sexe" value="dona"> Dona

        <label for="edat">Anys:</label>
        <input id="edat" type="number">

        <label for="altura">Altura:</label>
        <input id="altura" type="number">

        <label for="pes">Pes:</label>
        <input id="pes" type="number">

        <!-- Drag and Drop-->
        <div id="destiDrag" ondrop="drop(event);" ondragover="zoneDrop(event);">

        </div>
        <div id="opcionsDrag">
            <div id="pocCap" draggable="true" ondragstart="startDrag(event);" ondragend="endDrag(event);">Calories necessàries amb poc o cap exercici</div>
            <div id="lleuger" draggable="true" ondragstart="startDrag(event);" ondragend="endDrag(event);">Calories necessàries amb exercici lleuger (1-3 dies per setmana)</div>
            <div id="moderat" draggable="true" ondragstart="startDrag(event);" ondragend="endDrag(event);">Calories necessàries amb exercici moderat (3-5 dies per setmana)</div>
            <div id="fort" draggable="true" ondragstart="startDrag(event);" ondragend="endDrag(event);">Calories necessàries amb exercici fort (6 dies per setmana)</div>
            <div id="professional" draggable="true" ondragstart="startDrag(event);" ondragend="endDrag(event);">Calories necessàries amb exercici professional o extrem</div>
        </div>

        <input type="hidden" id="activitat" name="activitat" value="default">
        <button id="calc">Calcular</button>
    </section>
    <section id="resultat">

    </section>
    <script>
        const buttonCalc = document.querySelector("#calc");

        buttonCalc.addEventListener("click", function() {
            let sexe;
            if (document.querySelector('#rad1').checked) {
                sexe = document.querySelector("#rad1").value;
            } else {
                sexe = document.querySelector("#rad2").value;
            }

            const pes = document.querySelector("#pes").value;
            const altura = document.querySelector("#altura").value;
            const edat = document.querySelector("#edat").value;
            const activitat = document.querySelector("#activitat").value;

            console.log(sexe);
            console.log(pes)
            console.log(altura);
            console.log(edat);
            console.log(activitat)

            const tmb = calculTMB(sexe, pes, altura, edat);
            const calNecessaries = tmb * activitat;
            document.querySelector("#resultat").innerHTML = calNecessaries;
        })

        function calculTMB(sexe, pes, altura, edat) {
            if (sexe === "home") {
                return (10 * pes) + (6.25 * altura) - (5 * edat) + 5;
            } else {
                return (10 * pes) + (6.25 * altura) - (5 * edat) - 161;
            }
        }

        function startDrag(ev) {
            console.log("Comença el drag")
            ev.dataTransfer.setData("idSelec", ev.target.id);
        }

        function endDrag(ev) {
            console.log("Termina el drag")
            ev.dataTransfer.clearData();
        }

        function zoneDrop(ev) {
            console.log("zona a on es pot fer drop")
            ev.preventDefault();
        }

        function drop(ev) {
            console.log("Drop!")
            ev.preventDefault();

            const myNode = document.querySelector("#destiDrag");
            while (myNode.firstChild) {
                myNode.removeChild(myNode.firstChild);
            }


            const id = ev.dataTransfer.getData("idSelec");
            if (id === "pocCap") {
                const elmnt = document.querySelector("#pocCap");
                const cln = elmnt.cloneNode(true);
                document.querySelector("#destiDrag").appendChild(cln);
                document.querySelector("#activitat").value = 1.2;

            } else if (id === "lleuger") {
                const elmnt = document.querySelector("#lleuger");
                const cln = elmnt.cloneNode(true);
                document.querySelector("#destiDrag").appendChild(cln);
                document.querySelector("#activitat").value = 1.375;

            } else if (id === "moderat") {
                const elmnt = document.querySelector("#moderat");
                const cln = elmnt.cloneNode(true);
                document.querySelector("#destiDrag").appendChild(cln);
                document.querySelector("#activitat").value = 1.55;

            } else if (id === "fort") {
                const elmnt = document.querySelector("#fort");
                const cln = elmnt.cloneNode(true);
                document.querySelector("#destiDrag").appendChild(cln);
                document.querySelector("#activitat").value = 1.725;

            } else if (id === "professional") {
                const elmnt = document.querySelector("#professional");
                const cln = elmnt.cloneNode(true);
                document.querySelector("#destiDrag").appendChild(cln);
                document.querySelector("#activitat").value = 1.9;

            }

            console.log(id)
        }
    </script>
</body>

</html>